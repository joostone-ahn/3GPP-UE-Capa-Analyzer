# Sequence 로 정의되는 파라미터 아이템별 구분자 추가
para_list = []
para_list.append(['supportedBandListEUTRA', 'SupportedBandEUTRA'])
para_list.append(['bandListEUTRA', 'BandInfoEUTRA'])
para_list.append(['interFreqBandList', 'InterFreqBandInfo'])
para_list.append(['interRAT-BandList', 'InterRAT-Info'])
para_list.append(['supportedBandCombination-v10i0', 'BandCombinationParameters-v10i0'])
para_list.append(['bandParameterList-v10i0', 'BandParameters-v10i0'])
para_list.append(['bandParametersDL-v10i0', 'CA-MIMO-ParametersDL-v10i0'])
para_list.append(['supportedBandCombination-r10', 'BandCombinationParameters-r10'])  # sp_para
para_list.append(['bandParametersUL-r10', 'CA-MIMO-ParametersUL-r10'])
para_list.append(['bandParametersDL-r10', 'CA-MIMO-ParametersDL-r10'])
para_list.append(['bandCombinationListEUTRA-r10', 'BandInfoEUTRA'])
para_list.append(['supportedBandCombinationExt-r10', 'BandCombinationParametersExt-r10'])
para_list.append(['supportedBandCombination-v1130', 'BandCombinationParameters-v1130'])
para_list.append(['supportedBandListEUTRA-v1250', 'SupportedBandEUTRA-v1250'])
para_list.append(['supportedBandListEN-DC-r15', 'SupportedBandNR-r15'])
para_list.append(['featureSetsDL-r15', 'FeatureSetDL-r15'])
para_list.append(['featureSetsDL-PerCC-r15', 'FeatureSetDL-PerCC-r15'])
para_list.append(['featureSetsUL-r15', 'FeatureSetUL-r15'])
para_list.append(['featureSetsUL-PerCC-r15', 'FeatureSetUL-PerCC-r15'])
para_list.append(['supportedBandListNR', 'BandNR'])
para_list.append(['supportedCSI-RS-ResourceList', 'SupportedCSI-RS-Resource'])
para_list.append(['featureSetsDownlink', 'FeatureSetDownlink'])
para_list.append(['featureSetsDownlinkPerCC', 'FeatureSetDownlinkPerCC'])
para_list.append(['featureSetsUplink', 'FeatureSetUplink'])
para_list.append(['featureSetsUplinkPerCC', 'FeatureSetUplinkPerCC'])
para_list.append(['featureSetsDownlink-v1540', 'FeatureSetDownlink-v1540'])
para_list.append(['supportedBandCombinationList', 'BandCombination'])
para_list.append(['supportedBandCombinationList-v1540', 'BandCombination-v1540'])
para_list.append(['bandList-v1540', 'BandParameters-v1540'])
para_list.append(['featureSetCombinations', 'FeatureSetCombination'])  # sp_para
para_list.append(['rlc-BearerToAddModList', 'RLC-BearerConfig'])
para_list.append(['schedulingRequestToAddModList', 'SchedulingRequestToAddMod'])
para_list.append(['tag-ToAddModList', 'TAG'])
para_list.append(['scs-SpecificCarrierList', 'SCS-SpecificCarrier'])
para_list.append(['commonSearchSpaceList', 'SearchSpace'])
para_list.append(['pdsch-TimeDomainAllocationList', 'PDSCH-TimeDomainResourceAllocation'])
para_list.append(['pusch-TimeDomainAllocationList', 'PUSCH-TimeDomainResourceAllocation'])
para_list.append(['ssb-ResourceList', 'CFRA-SSB-Resource'])
para_list.append(['downlinkBWP-ToAddModList', 'BWP-Downlink'])
para_list.append(['controlResourceSetToAddModList', 'ControlResourceSet'])
para_list.append(['searchSpacesToAddModList', 'SearchSpace'])
para_list.append(['tci-StatesToAddModList', 'TCI-State'])
para_list.append(['pdsch-TimeDomainAllocationListsetup:', 'PDSCH-TimeDomainResourceAllocation'])
para_list.append(['zp-CSI-RS-ResourceToAddModList', 'ZP-CSI-RS-Resource'])
para_list.append(['aperiodic-ZP-CSI-RS-ResourceSetsToAddModList', 'ZP-CSI-RS-ResourceSet'])
para_list.append(['uplinkBWP-ToAddModList', 'BWP-Uplink'])
para_list.append(['resourceSetToAddModList', 'PUCCH-ResourceSet'])
para_list.append(['resourceToAddModList', 'PUCCH-Resource'])
para_list.append(['schedulingRequestResourceToAddModList', 'SchedulingRequestResourceConfig'])
para_list.append(['p0-AlphaSets', 'P0-PUSCH-AlphaSet'])
para_list.append(['pusch-TimeDomainAllocationListsetup:', 'PUSCH-TimeDomainResourceAllocation'])
para_list.append(['srs-ResourceSetToAddModList', 'SRS-ResourceSet'])
para_list.append(['srs-ResourceToAddModList', 'SRS-Resource'])
para_list.append(['nzp-CSI-RS-ResourceToAddModList', 'NZP-CSI-RS-Resource'])
para_list.append(['nzp-CSI-RS-ResourceSetToAddModList', 'NZP-CSI-RS-ResourceSet'])
para_list.append(['csi-IM-ResourceToAddModList', 'CSI-IM-Resource'])
para_list.append(['csi-IM-ResourceSetToAddModList', 'CSI-IM-ResourceSet'])
para_list.append(['csi-ResourceConfigToAddModList', 'CSI-ResourceConfig'])
para_list.append(['csi-ReportConfigToAddModList', 'CSI-ReportConfig'])
para_list.append(['pucch-CSI-ResourceList', 'PUCCH-CSI-Resource'])
para_list.append(['measObjectToAddModList', 'MeasObjectToAddModList'])
para_list.append(['reportConfigToAddModList', 'ReportConfigToAddModList'])
para_list.append(['measIdToAddModList', 'MeasIdToAddModList'])
para_list.append(['quantityConfigNR-List', 'QuantityConfigNR'])
para_list.append(['ue-CapabilityRAT-ContainerList', 'UE-CapabilityRAT-Container']) #20.09.16
para_list.append(['srb-ToAddModList', 'SRB-ToAddMod']) #20.09.16
para_list.append(['drb-ToAddModList', 'DRB-ToAddMod']) #20.09.16
para_list.append(['n1PUCCH-AN-CS-List-r10', 'N1PUCCH-AN-CS-r10']) #20.09.16
para_list.append(['sCellToAddModList-r10', 'SCellToAddMod-r10']) #20.09.16
para_list.append(['measResultServFreqList-r10', 'MeasResultServFreq-r10']) #20.09.16
para_list.append(['freqPriorityListEUTRA', 'FreqPriorityEUTRA']) #20.09.16
para_list.append(['quantityConfigNRList-r15', 'QuantityConfigNR-r15']) #20.09.16
para_list.append(['cellsToAddModList', 'CellsToAddMod']) #20.09.16
para_list.append(['measResultRS-IndexList-r15', 'MeasResultSSB-Index-r15']) #20.09.16
para_list.append(['measResultServingMOList', 'MeasResultServMOList']) #20.09.16
para_list.append(['resultsSSB-Indexes', 'ResultsPerSSB-IndexList']) #20.09.16
para_list.append(['nonContiguousUL-RA-WithinCC-List-r10', 'NonContiguousUL-RA-WithinCC-List-r10']) #21.01.04
para_list.append(['supportedBandCombination-v1430', 'BandCombinationParameters-v1430']) #21.01.14
para_list.append(['bandParameterList-v1430', 'BandParameters-v1430']) #21.01.14
para_list.append(['ul-256QAM-perCC-InfoList-r14', 'UL-256QAM-perCC-Info-r14']) #21.01.14
para_list.append(['featureSetsDownlink-v15a0', 'FeatureSetDownlink-v15a0']) #21.01.14
para_list.append(['plmn-IdentityList', 'PLMN-IdentityInfo']) #21.01.14
para_list.append(['schedulingInfoList', 'SchedulingInfo']) #21.01.14
para_list.append(['plmn-InfoList-r15', 'PLMN-Info-r15']) #21.01.14
para_list.append(['interFreqCarrierFreqList', 'InterFreqCarrierFreqInfo']) #21.01.14
para_list.append(['stag-ToAddModList-r11', 'STAG-ToAddMod-r11']) #21.01.14
para_list.append(['failureDetectionResourcesToAddModList', 'RadioLinkMonitoringRS']) #21.01.14
para_list.append(['p0-Set', 'P0-PUCCH']) #21.01.14
para_list.append(['pathlossReferenceRSs', 'PUCCH-PathlossReferenceRS']) #21.01.14
para_list.append(['pathlossReferenceRSToAddModList', 'PUSCH-PathlossReferenceRS']) #21.01.14
para_list.append(['sri-PUSCH-MappingToAddModList', 'SRI-PUSCH-PowerControl']) #21.01.14
para_list.append(['associatedReportConfigInfoList', 'CSI-AssociatedReportConfigInfo']) #21.01.14
para_list.append(['spatialRelationInfoToAddModList', 'PUCCH-SpatialRelationInfo']) #21.01.14
para_list.append(['csi-SSB-ResourceSetToAddModList', 'CSI-SSB-ResourceSet']) #21.01.14
para_list.append(['sCellToAddModList', 'SCellConfig']) #21.01.14

para_list_0 =[]
para_list_1 =[]
for n in para_list :
    para_list_0.append(n[0])
    para_list_1.append(n[1])

sp_para_list = []
sp_para_list.append(['BandCombinationParameters-r10', 'BandParameters-r10'])
sp_para_list.append(['FeatureSetCombination', 'FeatureSetsPerBand'])

sp_para_list_0 =[]
sp_para_list_1 =[]
for n in sp_para_list :
    sp_para_list_0.append(n[0])
    sp_para_list_1.append(n[1])



# item sort 결과의 name 중복 제거하고, 해당하는 RRC Sequence 파라미터 찾기 위한 함수
def find_para(item_sort):
    find_para = []
    find_sp_para = []
    for n in range(len(item_sort)):
        rst = item_sort[n]
        if 'Item' not in rst['name']:
            if rst['name'] not in find_para: # 중복 제거
                if rst['name'] not in para_list_0:
                    if ':' not in rst['name']: #choice 아이템에서 처리 (이 함수는 sequence 함수 처리용)
                        find_para.append(rst['name'])
        elif 'Item0' in rst['name']: #sort_items 함수에서 name 의 공백 제거함
            for para in para_list:
                if para[0] == item_sort[n-1]['name']:
                    if para[1] not in sp_para_list_0:
                        find_sp_para.append(para[1])

    debug_list =[]
    if find_para:
        debug_list.append('> Please update "para_list" in "RRC_para.py"')
        for n in find_para:
            debug_list.append(" para_list.append(['" + n + "', ''])")
        debug_list.append('-'*85)

    if find_sp_para:
        debug_list.append('> Please update "sp_para_list" in "RRC_para.py"')
        for n in find_sp_para:
            debug_list.append(" sp_para_list.append(['" + n + "', ''])")
        debug_list.append('-'*85)

    return debug_list

def insert_para(item_sort,msg):

    for item in item_sort:
        for para in para_list:
            if item['name'] == para[0]:
                a,b = item['range']
                tab_count = msg[a].count('\t')
                for n in range(a,b+1):
                    if tab_count != msg[n].count('\t'):
                        msg[n] = msg[n][0] + '\t' + msg[n][1:]
                    elif tab_count == msg[n].count('\t'):
                        msg[n] = msg[n] + '\n\t' + '\t'*tab_count + para[1]


    # print(len(msg))
    for n in range(len(msg)*2): # List 길이가 늘어나는 것을 고려
        try:
            msg[n]
        except:
            break
        if '\n' in msg[n]:
            # print(msg[n])
            a = msg[n].split('\n')
            msg[n] = a[1]
            msg.insert(n,a[0])
            # print(msg[n]+'*')
            # print(msg[n+1]+'**')
    # print(len(msg))

    return msg

# item sort 결과 name 이 item 표기되는 파라미터 ({{{ 3번 연속)
def insert_sp_para(item_sort,msg):
    for item in item_sort:
        for sp_para in sp_para_list:
            if item['name'] == sp_para[0]:
                a,b = item['range']
                tab_count = msg[a].count('\t')
                for n in range(a,b+1):
                    if tab_count != msg[n].count('\t'):
                        msg[n] = msg[n][0] + '\t' + msg[n][1:]
                    elif tab_count == msg[n].count('\t'):
                        msg[n] = msg[n] + '\n\t' + '\t'*tab_count + sp_para[1]

    # print(len(msg))
    for n in range(len(msg)*2): # List 길이가 늘어나는 것을 고려
        try:
            msg[n]
        except:
            break
        if '\n' in msg[n]:
            # print(msg[n])
            a = msg[n].split('\n')
            msg[n] = a[1]
            msg.insert(n,a[0])
            # print(msg[n]+'*')
            # print(msg[n+1]+'**')
    # print(len(msg))

    return msg
